(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):"object"===typeof exports?module.exports=g(require("jquery")):g(jQuery)})(function(g){function h(){this.removeEventListener("touchmove",m);this.removeEventListener("touchend",h);l=!1}function m(b){g.detectSwipe.preventDefault&&b.preventDefault();if(l){var e=k-b.touches[0].pageX;b=n-b.touches[0].pageY;var d,a=window.devicePixelRatio||1;Math.abs(e)*a>=g.detectSwipe.threshold?d=0<e?"left":"right":Math.abs(b)*a>=g.detectSwipe.threshold&&
(d=0<b?"up":"down");d&&(h.call(this),g(this).trigger("swipe",d).trigger("swipe"+d))}}function b(b){1==b.touches.length&&(k=b.touches[0].pageX,n=b.touches[0].pageY,l=!0,this.addEventListener("touchmove",m,!1),this.addEventListener("touchend",h,!1))}g.detectSwipe={version:"2.1.2",enabled:"ontouchstart"in document.documentElement,preventDefault:!0,threshold:20};var k,n,l=!1;g.event.special.swipe={setup:function(){this.addEventListener&&this.addEventListener("touchstart",b,!1)}};g.each(["left","up","down",
"right"],function(){g.event.special["swipe"+this]={setup:function(){g(this).on("swipe",g.noop)}}})});var isMobile=window.navigator.maxTouchPoints||"ontouchstart"in document;Array.prototype.max=function(){return Math.max.apply(null,this)};Array.prototype.min=function(){return Math.min.apply(null,this)};
var MD5=function(){function g(g,e){var d=g[0],a=g[1],c=g[2],f=g[3];d=m(d,a,c,f,e[0],7,-680876936);f=m(f,d,a,c,e[1],12,-389564586);c=m(c,f,d,a,e[2],17,606105819);a=m(a,c,f,d,e[3],22,-1044525330);d=m(d,a,c,f,e[4],7,-176418897);f=m(f,d,a,c,e[5],12,1200080426);c=m(c,f,d,a,e[6],17,-1473231341);a=m(a,c,f,d,e[7],22,-45705983);d=m(d,a,c,f,e[8],7,1770035416);f=m(f,d,a,c,e[9],12,-1958414417);c=m(c,f,d,a,e[10],17,-42063);a=m(a,c,f,d,e[11],22,-1990404162);d=m(d,a,c,f,e[12],7,1804603682);f=m(f,d,a,c,e[13],12,
-40341101);c=m(c,f,d,a,e[14],17,-1502002290);a=m(a,c,f,d,e[15],22,1236535329);d=b(d,a,c,f,e[1],5,-165796510);f=b(f,d,a,c,e[6],9,-1069501632);c=b(c,f,d,a,e[11],14,643717713);a=b(a,c,f,d,e[0],20,-373897302);d=b(d,a,c,f,e[5],5,-701558691);f=b(f,d,a,c,e[10],9,38016083);c=b(c,f,d,a,e[15],14,-660478335);a=b(a,c,f,d,e[4],20,-405537848);d=b(d,a,c,f,e[9],5,568446438);f=b(f,d,a,c,e[14],9,-1019803690);c=b(c,f,d,a,e[3],14,-187363961);a=b(a,c,f,d,e[8],20,1163531501);d=b(d,a,c,f,e[13],5,-1444681467);f=b(f,d,a,
c,e[2],9,-51403784);c=b(c,f,d,a,e[7],14,1735328473);a=b(a,c,f,d,e[12],20,-1926607734);d=h(a^c^f,d,a,e[5],4,-378558);f=h(d^a^c,f,d,e[8],11,-2022574463);c=h(f^d^a,c,f,e[11],16,1839030562);a=h(c^f^d,a,c,e[14],23,-35309556);d=h(a^c^f,d,a,e[1],4,-1530992060);f=h(d^a^c,f,d,e[4],11,1272893353);c=h(f^d^a,c,f,e[7],16,-155497632);a=h(c^f^d,a,c,e[10],23,-1094730640);d=h(a^c^f,d,a,e[13],4,681279174);f=h(d^a^c,f,d,e[0],11,-358537222);c=h(f^d^a,c,f,e[3],16,-722521979);a=h(c^f^d,a,c,e[6],23,76029189);d=h(a^c^f,
d,a,e[9],4,-640364487);f=h(d^a^c,f,d,e[12],11,-421815835);c=h(f^d^a,c,f,e[15],16,530742520);a=h(c^f^d,a,c,e[2],23,-995338651);d=k(d,a,c,f,e[0],6,-198630844);f=k(f,d,a,c,e[7],10,1126891415);c=k(c,f,d,a,e[14],15,-1416354905);a=k(a,c,f,d,e[5],21,-57434055);d=k(d,a,c,f,e[12],6,1700485571);f=k(f,d,a,c,e[3],10,-1894986606);c=k(c,f,d,a,e[10],15,-1051523);a=k(a,c,f,d,e[1],21,-2054922799);d=k(d,a,c,f,e[8],6,1873313359);f=k(f,d,a,c,e[15],10,-30611744);c=k(c,f,d,a,e[6],15,-1560198380);a=k(a,c,f,d,e[13],21,1309151649);
d=k(d,a,c,f,e[4],6,-145523070);f=k(f,d,a,c,e[11],10,-1120210379);c=k(c,f,d,a,e[2],15,718787259);a=k(a,c,f,d,e[9],21,-343485551);g[0]=d+g[0]&4294967295;g[1]=a+g[1]&4294967295;g[2]=c+g[2]&4294967295;g[3]=f+g[3]&4294967295}function h(b,e,d,a,c,f){e=(e+b&4294967295)+(a+f&4294967295)&4294967295;return(e<<c|e>>>32-c)+d&4294967295}function m(b,e,d,a,c,f,g){return h(e&d|~e&a,b,e,c,f,g)}function b(b,e,d,a,c,f,g){return h(e&a|d&~a,b,e,c,f,g)}function k(b,e,d,a,c,f,g){return h(d^(e|~a),b,e,c,f,g)}function n(b){var e=
b,d=e.length;b=[1732584193,-271733879,-1732584194,271733878];var a;for(a=64;a<=e.length;a+=64){var c,f=e.substring(a-64,a),h=[];for(c=0;64>c;c+=4)h[c>>2]=f.charCodeAt(c)+(f.charCodeAt(c+1)<<8)+(f.charCodeAt(c+2)<<16)+(f.charCodeAt(c+3)<<24);g(b,h)}e=e.substring(a-64);c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<e.length;a++)c[a>>2]|=e.charCodeAt(a)<<(a%4<<3);c[a>>2]|=128<<(a%4<<3);if(55<a)for(g(b,c),a=0;16>a;a++)c[a]=0;c[14]=8*d;g(b,c);for(e=0;e<b.length;e++){d=b;a=e;c=b[e];f="";for(h=0;4>h;h++)f+=
l[c>>8*h+4&15]+l[c>>8*h&15];d[a]=f}return b.join("")}var l="0123456789abcdef".split("");n("hello");return{get:n}}(),calendario=function(g,h){var m;function b(){this.accion=0;q.bind(this)(0)}function k(a){this.fecha_ini=new Date;this.accion=this.offset=0;this.limits={up:999,down:-999};this.hash=a;this.cache={};void 0!=a&&w.comprobar_hash.bind(this)(a);b.bind(this)()}function n(){var a=this;$(".calendario").on("swipeleft",function(){$(".pag_mas").click()}).on("swiperight",function(){$(".pag_menos").click()});
$("body").on("click",a.selector+" .pag",function(){if($(this).hasClass("disabled"))return!1;$(a.selector).find(".pag,.cambiar_vista").addClass("disabled");$(this).find("span").addClass("glyphicon-refresh fa-spin");a.accion=$(this).hasClass("pag_menos")?-1:1;d("Click flechas",a);q.bind(a)()});$("body").on("click",a.selector+" .cambiar_vista",function(d){if($(this).hasClass("disabled"))return!1;$("body").find(a.selector+" td").each(function(){if(""!=$(this).html()&&$(this).hasClass("calTRABAJA")){var a=
-1==$(this).html().indexOf("-")?$(this).attr("data-horas"):$(this).attr("data-dia");$(this).html(a)}})})}function l(){var a=["this_not_exist_in_dom"];$(this.selector).find(".pag>span").removeClass("glyphicon-refresh fa-spin");-12!=this.offset&&this.offset!=this.limits.down||a.push("pag_menos");12!=this.offset&&this.offset!=this.limits.up||a.push("pag_mas");$(this.selector).find(".pag").not(a.join(",.")).removeClass("disabled");$(this.selector).find(".cambiar_vista").removeClass("disabled")}function q(){if(12<
Math.abs(this.offset+this.accion)&&0!=this.accion)return d("[ERROR]","Pager fuera de l\ufffdmites",this),l.bind(this)(),!1;c.bind(this)()}function e(a){if("object"==typeof a)return a;var d=Date;a=-1!==a.indexOf("T")?a.split("-")[0]+"/"+a.split("-")[1]+"/"+a.split("-")[2].split("T")[0]:a.split("/")[2]+"/"+a.split("/")[1]+"/"+a.split("/")[0];return new d(a)}function d(){g&&console.log(arguments)}function a(a){0==this.offset?(this.limits.up=0,this.limits.down=0,$(this.selector).find(".subtle.mt30").html('<i class="fa fa-calendar"></i><span class="cargandoText">Sin datos de calendario</span>')):
(this.cache["offset"+a]=[],1==this.accion?this.limits.up=this.offset:this.limits.down=this.offset)}function c(d,b){var c=this.offset+this.accion;void 0!==this.cache["offset"+c]?(z.bind(this)(this.cache["offset"+c],!0),l.bind(this)(),"function"==typeof b&&b()):(a.bind(this),l.bind(this)())}function f(a,d){for(var b=[],c,e=0;e<a-1;e++)b.push({horac:"",horaf:"",estado:"VACIO",Fecha:new Date(d-864E5*(1+e))}),c=0==b[b.length-1].Fecha.getDay()?7:b[b.length-1].Fecha.getDay();return{nuevo:b.reverse(),diaIni:c}}
function u(a,b){return 1!=$(a).length?(d("No se ha encontrado el elemento con el contenedor ["+a+"] en el DOM o se han encontrado varios."),d("Por favor, elige un selector correcto."),!1):!0}function p(a,b){for(var d=$(this)[0].getElementsByTagName("tbody")[0],c=0;c<a;c++)for(var e=d.insertRow(d.rows.length),f=0;f<b;f++)e.insertCell(f)}function v(a){try{var b=a.split(":"),d=parseInt(60*b[0]);return d+=parseInt(b[1])}catch(D){return 0}}function r(a,b){var d=parseInt(a/1E3),c=void 0==b?7:2;console.log("get_time_human",
d);return[{nombre:"mes",segundos:2592E3},{nombre:"semana",segundos:604800},{nombre:"dia",segundos:86400},{nombre:"hora",segundos:3600},{nombre:"minuto",segundos:60},{nombre:"segundo",segundos:1}].reduce(function(a,b,e){e=Math.floor(d/b.segundos);0<e&&0<c&&(d-=e*b.segundos,a+=" "+e+" "+b.nombre+(1<e?"s":""),c--);return a},"")}function x(a,b,d,c){a=this.cache;var f=!1,g=d=!1,h,l;for(l in a)a.hasOwnProperty(l)&&a[l].map(function(a,b){e(a.Fecha).getDate();var c=a.Fecha.split("T")[0].replace(/-/g,"");
var l=new Date;var k=l.getMonth()+1,p=l.getDate();k=10>k?"0"+k:k;p=10>p?"0"+p:p;l=l.getFullYear()+""+k+""+p;c=c==l;p=a.Fecha.split("T")[0].split("-");if(c||d&&"TRABAJA"==a.estado&&!c||"VACACIONES"==a.estado&&!g&&f){l=(new Date(p[0],p[1]-1,e(a.Fecha).getDate(),a.horac.split(":")[0],a.horac.split(":")[1],0)).getTime();k=(new Date(p[0],p[1]-1,e(a.Fecha).getDate(),0,0,0)).getTime();p=(new Date(p[0],p[1]-1,e(a.Fecha).getDate(),a.horaf.split(":")[0],a.horaf.split(":")[1],0)).getTime();var n=(new Date).getTime()}else return!1;
c&&(f=!0,h=a.estado,console.log("_es_dia_actual",a),p>n&&"TRABAJA"==a.estado?$("#info").html('<div class="well text-center">Te queda para salir:<br><span class="glyphicon glyphicon-time" aria-hidden="true"></span><span class="smaller">'+r(p-n)+"</span></div>"):l>n&&"TRABAJA"==a.estado?$("#info").html('<div class="well text-center">Te queda para entrar:<br><span class="glyphicon glyphicon-time" aria-hidden="true"></span><span class="smaller">'+r(l-n)+"</span></div>"):d=!0);d&&"TRABAJA"==a.estado&&
!c&&(console.log("_es_dia_siguiente",a),$("#info").append('<div class="well text-center">Te queda para entrar:<br><span class="glyphicon glyphicon-time" aria-hidden="true"></span><span class="smaller">'+r(l-n)+"</span></div>"),d=!1);"VACACIONES"==a.estado&&!g&&k>n&&f&&"VACACIONES"!=h&&($("#info").append('<div class="well text-center">Tienes vacaciones dentro de:<br><span class="glyphicon glyphicon-time" aria-hidden="true"></span><span class="smaller">'+r(k-n,!0)+"</span></div>"),g=!0)})}function A(){var a=
JSON.parse(localStorage.getItem("calendario_user_list"))||{hashes:[],datos:{}};if(1<a.hashes.length){var b="",d="";a.hashes.map(function(c){d=a.datos[c].primary?"<td>&nbsp;</td>":'<td><button class="btn btn-danger btn-block delete_multi_user btn-sm" data-hash="'+c+'"><i class="fa fa-trash-o mr5"></i>Borrar</button></td>';b+="<tr><td>"+a.datos[c].nombre+'</td><td><button class="btn btn-success btn-block change_multi_user btn-sm" data-hash="'+c+'"><i class="fa fa-eye mr5"></i>Ver</button></td>'+d+"</tr>"});
$("#usuarios_multi").html(b);$(".multi_usuario").show()}}function z(a,b){var d=this,c=this.offset+this.accion,g=a;void 0==b&&(this.cache["offset"+c]=g,w.actualizar(this));if(0==g.length)return!1;d.offset=c;var h=e(g[0].Fecha);c=0==h.getDay()?7:h.getDay();var l=h.getDate(),k=B[h.getMonth()],n=h.getFullYear();y=h.getMonth()+1;m=h.getFullYear();$(this.selector).find(".mesCalendario").html(k+" de "+n);1<l&&(h=f(l,h),c=h.diaIni||c,g=$.merge(h.nuevo.reverse(),g));$(this.selector+" .calendario tr:gt(1)").remove();
p.bind($(this.selector+" .calendario"))(6,7);g.reduce(function(a,c,b){var f=c.horac,g=c.horaf;c.estado=c.estado||"VACIO";var h=e(c.Fecha).getDate();b=h+""+y+""+m;var l=new Date;l=l.getDate()+""+(l.getMonth()+1)+""+l.getFullYear();l=b==l;var k=null==g?"":'<span class="glyphicon glyphicon-log-in"></span> '+f+'<br/><span class="glyphicon glyphicon-log-out"></span>Salida:  '+g,p=1>=a.columna?"right":4<a.columna?"left":"bottom";b=$(d.selector).find(".calendario tr:eq("+a.fila+") td:eq("+a.columna+")");
$(b).html(h).addClass("cal cal"+c.estado.replace(/\./g,"")).attr("data-toggle","tooltip").attr("data-html","true").attr("data-toggle","popover").attr("data-content",k).attr("data-trigger","hover").attr("title",c.estado||"").attr("data-dia",h).attr("data-horas",f+" - "+g).attr("data-placement",p);(22<=g.split(":")[0]||0==g.split(":")[0])&&"TRABAJA"==c.estado&&$(b).addClass("noche");l&&$(b).addClass("dia_actual");1==d.options.special&&"LIBRA"!=c.estado&&(g=c.horaf,f=v(c.horac),g=v(g),f=g>f?g-f:1440-
f+g,console.log("_minutos",c.horac,c.horaf,f),420==f&&$(b).addClass("regulariza"));a.columna++;6<a.columna&&(a.fila++,a.columna=0);return a},{fila:2,columna:c-1});$(".popover").popover("hide");$(d.selector).find(".cal").popover({container:"body"});$(d.selector).find(".cal").on("focus",":not(.popover)",function(){$(".popover").popover("hide")})}var B="Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" ");var y=m=0;var t=function(a,c){this.selector=a;this.fecha_ini=
new Date;this.accion=this.offset=0;this.limits={up:99,down:-99};this.cache={};this.options=c};t.prototype.siguiente=function(){q.bind(this)(1)};t.prototype.anterior=function(){q.bind(this)(-1)};t.prototype.borrar_cache=function(a,c){a=void 0==a?!1:a;console.log("LocalStorage borrado");localStorage.removeItem("calendario_cookies");localStorage.removeItem("calendario_user_list");localStorage.removeItem("calendario_isdev");localStorage.removeItem("calendario_mes");localStorage.removeItem("calendario_hash");
localStorage.removeItem("calendario_cache");a||k.bind(this)();"function"==typeof c&&c()};t.prototype.cambiar_calendario=function(a){k.bind(this)(a);x.bind(this)()};var w=function(){function a(a){try{var c=JSON.parse(localStorage.getItem("calendario_cache"))||{},b=JSON.parse(localStorage.getItem("calendario_user_list"))||{hashes:[],datos:{}},e=a||b.hashes[0];c=JSON.parse(c[e].cache);d("obtener_storage [OK]{"+e+"}");var f=c||{}}catch(E){d("obtener_storage [ERROR]"),f={}}this.cache=f}return{comprobar_hash:a,
recuperar:function(c,b){localStorage.getItem("calendario_mes");(new Date).getMonth();localStorage.getItem("calendario_hash");a.bind(c)();b()},actualizar:function(a){try{JSON.parse(localStorage.getItem("calendario_cache")),d("obtener_storage_todo [OK]")}catch(C){d("obtener_storage_todo [ERROR]")}localStorage.setItem("calendario_cache",JSON.stringify(a.cache))}}}();return{crear:function(a,b,d,e){if(!u(a,b))return $(b.selector).find(".subtle.mt30").html('<i class="fa fa-calendar"></i><span class="cargandoText">Sin datos de calendario</span>'),
e(),!1;var f=new t(a,b);$(a).html('<table class="table calendario"><tbody><tr><th class=""><span class="fa fa-bars sb_toggle" ></span></th><th class="pag pag_menos swing" title="mes anterior"><span class="glyphicon glyphicon-chevron-left"></span></th><th colspan="3" class="mesCalendario">Calendario</th><th class="pag pag_mas swing"><span class="glyphicon glyphicon-chevron-right"></span></th><th class="cambiar_vista" title="Cambiar vista d\ufffdas/horas"><span class="fa fa-calendar"></span></th></tr><tr><th class="dias">lun</th><th class="dias">mar</th><th class="dias">mi\u00e9</th><th class="dias">jue</th><th class="dias">vie</th><th class="dias">sab</th><th class="dias">dom</th></tr><tr class="subtle"><td colspan="7" class="mt30 subtle" height="75%"><i class="fa fa-cog fa-spin"></i><span class="cargandoText">Cargando</span></td></tr></tbody></table><div id="nombre_calendario">Mi calendario</div><div class="container"><div class="row"><div class="col-sm-12"><div id="info"></div></div></div></div>');
void 0!==b.altura&&$(a).find("table").css("height",b.altura);n.bind(f)();w.recuperar(f,function(){c.bind(f)(!0,function(){x.bind(f)();A();d()})});return f}}}(1,1),base62=function(){var g=function(){var g=[],m={},b=[];[[48,57],[65,90],[97,122]].reduce(function(b,h,l){for(l=h[0];l<=h[1];l++)m[String.fromCharCode(l)]=b.length,g.push(String.fromCharCode(l)),b.push(String.fromCharCode(l));return b},b);return{hash:m,valores:b,arr:g}}();return{generar:function(h){console.log(parseInt(h),g.valores.length);
return isNaN(h)||parseInt(h)>g.valores.length||0>parseInt(h)?(console.log("Numero inv\ufffdlido."),!1):g.valores[h]},retornar:function(h){if(1>h.length)return console.log("Cadena no v\ufffdlida."),!1;var m="";h.split("").reduce(function(b,h,n){m="."==h?null:m+g.hash[h];return b},m);return m}}}(),get_datos=function(){function g(g){var h=[],e;g.match(/.{6}/g).reduce(function(a,c,d){e=[];c.split("").map(function(a,c){e.push(base62.retornar(a))});a.push({Fecha:k.anio+"-"+k.mes+"-"+e[0]+"T",estado:b.tipo_dia[e[1]],
horac:n[e[2]],horaf:n[e[3]]});null!=e[4]&&(a[a.length-1].horac2=n[e[4]]);null!=e[5]&&(a[a.length-1].horaf2=n[e[5]]);return a},h);var d=new Date;g=d.getMonth()+1;d=d.getFullYear();return{resultado:h,offset:"offset"+(k.anio==d?k.mes-g:12-k.meses+g)}}function h(b){k.esDev=b.substr(1,1);k.anio=2E3+parseInt(base62.retornar(b.substr(2,1)));k.mes=parseInt(base62.retornar(b.substr(3,1)));k.especial=parseInt(base62.retornar(b.substr(4,1)))}function m(b,g,e){try{var d=JSON.parse(localStorage.getItem("calendario_user_list"))||
{hashes:[],datos:{}}}catch(a){d={hashes:[],datos:{}}}if(0==d.hashes.length)d.hashes.push(e),d.datos[e]={nombre:"Mi calendario",primary:!0},localStorage.setItem("calendario_isdev",b.esDev);else if(void 0==d.datos[e]){for(b="";null==b||""==b;)b=prompt("Nuevo calendario detectado.\nIntroduce el nombre:","");d.hashes.push(e);d.datos[e]={nombre:b,primary:!1}}else 1==d.hashes.length?alert("Datos del calendario actualizados."):alert('Datos del calendario "'+d.datos[e].nombre+'" actualizados.');localStorage.setItem("calendario_user_list",
JSON.stringify(d));b=JSON.parse(localStorage.getItem("calendario_cache"))||{};delete b[e];b[e]={mes:(new Date).getMonth()+1,cache:JSON.stringify(g)};d.datos[e].primary&&(b[e].url=location.href.split("?")[1]);localStorage.setItem("calendario_cache",JSON.stringify(b));clean_and_reload()}var b={tipo_dia:{0:"BAJA",1:"FESTIVO",2:"LIBRA",3:"PERMISO",4:"TRABAJA",5:"VACACIONES"}},k={};var n=function(){for(var b=[],g=0;48>g;g++)b.push(Math.floor(g/2)+":"+(g%2?"30":"00"));return b}();(function(){if(-1==location.href.indexOf("?tx="))return console.log("Sin datos de calendario"),
$("#loading_ctn").fadeOut(),$("#calen").addClass("active in"),!1;var b=location.href.split("?tx=")[1];b=b.split("~");var n=b.pop(),e=b.join("~");if(MD5.get(e)!=n)return alert("ERR:56"),!1;n=b.shift();e=b.shift();var d={};h(n);b.map(function(a){a=g(a);d[a.offset]=a.resultado;k.mes++;12<k.mes&&(k.mes=1,k.anio++)});m(k,d,e)})()}();
(function(g,h){function m(){g.removeEventListener("load",m,!1);q=!0}function b(c){return a=a||new b.Class(c)}function k(a,b){for(var c in b)a[c]=b[c];return a}function n(){"#ath"==h.location.hash&&history.replaceState("",g.document.title,h.location.href.split("#")[0]);e.test(h.location.href)&&history.replaceState("",g.document.title,h.location.href.replace(e,"$1"));d.test(h.location.search)&&history.replaceState("",g.document.title,h.location.href.replace(d,"$2"))}var l="addEventListener"in g,q=!1;
"complete"===h.readyState?q=!0:l&&g.addEventListener("load",m,!1);var e=/\/ath(\/)?$/,d=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,a;b.intl={es_es:{ios:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>A\u00f1adir a pantalla de inicio</strong>.",android:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio, abre las opciones y pulsa <strong>A\u00f1adir a pantalla inicio</strong>. <small>El men\u00fa se puede acceder pulsando el bot\u00f3n t\u00e1ctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla %icon.</small>"}};
for(var c in b.intl)b.intl[c.substr(0,2)]=b.intl[c];b.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!1,detectHomescreen:!1};c=g.navigator.userAgent;var f=g.navigator;k(b,{hasToken:"#ath"==h.location.hash||e.test(h.location.href)||d.test(h.location.search),
isRetina:g.devicePixelRatio&&1<g.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(c),isMobileChrome:-1<c.indexOf("Android")&&/Chrome\/[.0-9]*/.test(c)&&-1==c.indexOf("Version"),isMobileIE:-1<c.indexOf("Windows Phone"),language:f.language&&f.language.toLowerCase().replace("-","_")||""});b.language="es_es";b.isMobileSafari=b.isIDevice&&-1<c.indexOf("Safari")&&0>c.indexOf("CriOS");b.OS=b.isIDevice?"ios":b.isMobileChrome?"android":b.isMobileIE?"windows":"unsupported";b.OSVersion=c.match(/(OS|Android) (\d+[_\.]\d+)/);
b.OSVersion=b.OSVersion&&b.OSVersion[2]?+b.OSVersion[2].replace("_","."):0;b.isStandalone="standalone"in g.navigator&&g.navigator.standalone;b.isTablet=b.isMobileSafari&&-1<c.indexOf("iPad")||b.isMobileChrome&&0>c.indexOf("Mobile");b.isCompatible=b.isMobileSafari&&6<=b.OSVersion||b.isMobileChrome;var u={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};b.removeSession=function(a){try{if(!localStorage)throw Error("localStorage is not defined");localStorage.removeItem(a||b.defaults.appID)}catch(v){}};
b.doLog=function(a){this.options.logging&&console.log(a)};b.Class=function(a){this.doLog=b.doLog;this.options=k({},b.defaults);k(this.options,a);this.options&&this.options.debug&&"undefined"===typeof this.options.logging&&(this.options.logging=!0);if(l)if(this.options.mandatory=this.options.mandatory&&("standalone"in g.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=!0===
this.options.detectHomescreen?"hash":this.options.detectHomescreen,this.options.debug&&(b.isCompatible=!0,b.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==b.OS?"android":b.OS,b.OSVersion="ios"==b.OS?"8":"4"),this.container=h.body,this.session=(this.session=this.getItem(this.options.appID))?JSON.parse(this.session):void 0,!b.hasToken||b.isCompatible&&this.session||(b.hasToken=!1,n()),b.isCompatible){this.session=this.session||u;try{if(!localStorage)throw Error("localStorage is not defined");
localStorage.setItem(this.options.appID,JSON.stringify(this.session));b.hasLocalStorage=!0}catch(r){b.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}a=!this.options.validLocation.length;for(var c=this.options.validLocation.length;c--;)if(this.options.validLocation[c].test(h.location.href)){a=!0;break}this.getItem("addToHome")&&this.optOut();if(this.session.optedout)this.doLog("Add to homescreen: not displaying callout because user opted out");else if(this.session.added)this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");
else if(a)if(b.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&this.options.onAdd.call(this)),this.doLog("Add to homescreen: not displaying callout because in standalone mode");else{if(this.options.detectHomescreen){if(b.hasToken){n();this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&b.hasLocalStorage&&this.options.onAdd.call(this));this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");
return}"hash"==this.options.detectHomescreen?history.replaceState("",g.document.title,h.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",g.document.title,h.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",g.document.title,h.location.href+(h.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit)){this.doLog("Add to homescreen: not displaying callout because skipping first visit");
return}this.options.privateModeOverride||b.hasLocalStorage?(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())):this.doLog("Add to homescreen: not displaying callout because browser is in private mode")}else this.doLog("Add to homescreen: not displaying callout because not a valid location")}else this.doLog("Add to homescreen: not displaying callout because device not supported")};b.Class.prototype=
{events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];if(b)this[b](a)},show:function(a){if(this.options.autostart&&!q)setTimeout(this.show.bind(this),50);else if(this.shown)this.doLog("Add to homescreen: not displaying callout because already shown on screen");
else{var c=Date.now(),d=this.session.lastDisplayTime;if(!0!==a){if(!this.ready){this.doLog("Add to homescreen: not displaying callout because not ready");return}if(c-d<6E4*this.options.displayPace){this.doLog("Add to homescreen: not displaying callout because displayed recently");return}if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount){this.doLog("Add to homescreen: not displaying callout because displayed too many times already");return}}this.shown=!0;this.session.lastDisplayTime=
c;this.session.displayCount++;this.updateSession();this.applicationIcon||(this.applicationIcon="ios"==b.OS?h.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):h.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));a="";"object"==typeof this.options.message&&
b.language in this.options.message?a=this.options.message[b.language][b.OS]:"object"==typeof this.options.message&&b.OS in this.options.message?a=this.options.message[b.OS]:this.options.message in b.intl?a=b.intl[this.options.message][b.OS]:""!==this.options.message?a=this.options.message:b.OS in b.intl[b.language]&&(a=b.intl[b.language][b.OS]);a="<p>"+a.replace(/%icon(?:\[([^\]]+)\])?/gi,function(a,b){return'<span class="ath-action-icon">'+(b?b:"icon")+"</span>"})+"</p>";this.viewport=h.createElement("div");
this.viewport.className="ath-viewport";this.options.modal&&(this.viewport.className+=" ath-modal");this.options.mandatory&&(this.viewport.className+=" ath-mandatory");this.viewport.style.position="absolute";this.element=h.createElement("div");this.element.className="ath-container ath-"+b.OS+" ath-"+b.OS+(parseInt(b.OSVersion)||"")+" ath-"+(b.isTablet?"tablet":"phone");this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;";
this.element.style.webkitTransform="translate3d(0,-"+g.innerHeight+"px,0)";this.element.style.transform="translate3d(0,-"+g.innerHeight+"px,0)";this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=h.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img));this.element.innerHTML+=a;this.viewport.style.left=
"-99999em";this.viewport.appendChild(this.element);this.container.appendChild(this.viewport);this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var a=this;this.updateViewport();g.addEventListener("resize",this,!1);g.addEventListener("scroll",this,!1);g.addEventListener("orientationchange",this,!1);this.options.modal&&h.addEventListener("touchmove",
this,!0);this.options.mandatory||setTimeout(function(){a.element.addEventListener("click",a,!0)},1E3);setTimeout(function(){a.element.style.webkitTransitionDuration="1.2s";a.element.style.transitionDuration="1.2s";a.element.style.webkitTransform="translate3d(0,0,0)";a.element.style.transform="translate3d(0,0,0)"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);
this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));g.removeEventListener("resize",this,!1);g.removeEventListener("scroll",this,!1);g.removeEventListener("orientationchange",this,!1);h.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration=
"0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=g.innerWidth+"px";this.viewport.style.height=g.innerHeight+"px";this.viewport.style.left=
g.scrollX+"px";this.viewport.style.top=g.scrollY+"px";var a=h.documentElement.clientWidth;this.orientation=a>h.documentElement.clientHeight?"landscape":"portrait";var c="ios"==b.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>a?1:c/g.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==
b.hasLocalStorage&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=u;this.updateSession()},getItem:function(a){try{if(!localStorage)throw Error("localStorage is not defined");return localStorage.getItem(a)}catch(v){b.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},
_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};g.addToHomescreen=b})(window,document);
var snd=function(){function g(b,g){if(!k)return!1;document.body.innerHTML+='<audio id="_snd_'+b+'" style="display:none;"><source src="/snd/'+b+'.ogg" type="audio/ogg"></audio>';g()}function h(b){if(!k)return!1;null==document.getElementById("_snd_"+b)?g(b,function(){h(b)}):m(b)}function m(b){b=document.getElementById("_snd_"+b);try{b.pause(),b.currentTime=0,b.play()}catch(l){}try{b.stop(),b.play()}catch(l){}}var b=function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("msie")?parseInt(b.split("msie")[1]):
!1}(),k=!b||10<b?!0:!1;return{play:function(b){h(b)}}}();